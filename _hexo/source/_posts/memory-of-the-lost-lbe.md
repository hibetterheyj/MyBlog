---
title: 纪念逝去的神器——LBE安全大师
tags:
  - LBE
  - 安全
  - Root
categories:
  - 异闻堂
date: 2016-09-27 13:12:00
updated: 2016-09-27 13:12:00
thumbnail: https://blog.nfz.yecdn.com/img/thumbnails/memory-of-the-lost-lbe.png!blogth
---

谨以此文向 **北京永杨安风科技有限公司** 和 **LBE 安全大师** 致敬！

<!--more-->

# 楔子
本来想写一篇关于如何用 xposed 和 root 优化手机的文章的，但是写到 LBE 安全大师的时候就停不下来了，索性便从头开一篇，专门来纪念这一款已经逝去的神软，没想到这篇反而比那篇文章更早面世了。
# LBE 发展始末
LBE 安全大师是一款出道很早的安全软件，2012 年就用“ LBE 隐私卫士”一炮打响。现在对于手机安软常说的“权限管理”、“骚扰拦截”最早都是 LBE 最早提出来的。
LBE 真正成名是因为利用 Android4.0 暴露出来的 “MasterKey” 漏洞，实现免 root 启动“主动防御”功能，一下子获得了一大批用户支持。
LBE在“流量校准”“骚扰拦截”等功能上是下了功夫的，很多功能是用心在做，与 360 ，腾讯之类的安软相比就非常明显。
自 2015 年新版发布以来，也是一堆安软中唯一界面采用了 Material Design 控件的，算是一股清流。LBE支持的系统从 Android2.1到5.1.1（部分AOKP6.0上LBE会引发崩溃），然而几年来安装包大小一直控制在 10M 以内，这是其它 BAT 家的出品的毒瘤望尘莫及的。
可惜的是，LBE 在年初转型，转而开发 **MuiltDroid** 技术、实现应用多开。该项技术最早起源于 LBE 安全大师内置的 sandbox 沙箱机制。LBE 最终开发出了平行空间，还为 MIUI 的系统分身提供了技术支持。但是，对于只有一个 12 名员工、至今仍需要天使投资人支持的公司来说，同时支持这么多项目是不可能的。LBE 安全大师这个项目就这样被搁浅了，最近一次更新已经是 5 月的事了，倒数第二次更新甚至是去年 12 月，而且至今也没有解决和 CM13 等 AOKP 的不兼容问题。

> 最近LBE再一次开始更新，但是却开始增加了广告、去除了很多实用的功能。看来LBE毕竟已经风光不再了。

# 原理
LBE 实现其全部功能的方法有点像 xposed ，通过向系统写入一个 jar 。但是与 xposed 开机自动运行 jar 不同，每次开机需要进入到系统 UI 以后，通过 LBE 的软件端通过 root 手动激活 jar ，激活以后实现功能都不需要再申请 root ，可以直接通过 jar 来 hook 。这个技术可以说远远领先了国内的安软，当然另一方面这也导致了 LBE 和 xposed 极易冲突出现崩溃。
# 云计算
LBE 从 6.0 开始，真正实现了安软与云端结合。
流量查询短信使用云解析，病毒查杀引入和安天合作的云病毒库，清理垃圾功能使用云数据库辨别和标识垃圾文件，骚扰拦截和电话帮的云数据库合作，流氓应用的链式唤醒有云端数据库记录，智能休眠后台服务也有云端数据库识别， LBE 的设置项支持云备份。。。
# 系统优化
LBE 安全大师虽然在很多功能上都十分用心，做的更加细致和人性化，但是毕竟和其它安全软件功能相近，也没有什么亮点。但是在系统优化方面，我不得不把这个单独拿出来讲，因为 LBE 相比其它安软，在这些方面做的更好。
LBE 安全大师实际上等于 写轮眼+绿色守护+阻止运行。
- 对于前台服务和缓存，LBE 可以用悬浮窗手动关闭程序和执行一键清理，也设置在关闭屏幕后自动关闭应用，这一点和绿色守护类似（但不同于阻止运行的只清理后台服务，LBE是不在白名单内的，无论前台、后台还是缓存都杀）。
- 对于后台服务，LBE 有一整套智能的机制：通过计算待机下单位时间耗电量、服务重要性（比如是否属于媒体服务如播放器），配合云数据库识别，然后决定是否进行休眠，休眠和杀进程不同在于开启屏幕后进程会复活（看出分应用 doze 或者绿色守护浅睡模式的影子了没有？请记住这个是在 绿色守护 2.8 beta 和 Android 6.0 发布之前推出的）。
- 对于应用自启，LBE 实现方法是像写轮眼一样，对于开机自启禁用 Boot_Completed 广播接收器，对于链式自启通过云端数据库识别和禁用 jpush，mipush，umeng，xinge 等广播接收器（但是实现的方式又是调用 jar，所以说跟红蓝哥的 xposed 模块 Disable Receiver 可能更像一些）。
- LBE 在日常使用时的原理与阻止运行仿佛完全不同，但是有一点是相似—— LBE 无论给什么应用进行权限设定时都会有一条“禁止自启”，尽管这个应用甚至可能没有广播接收器。LBE 的这个开关是 hook 了一项系统 API ，可以避免应用被未知方式唤醒。这一点和阻止运行阻止自启的原理相似。

------------


尽管 LBE 是如此一款神器，如今却已经不再更新。也许是 LBE 的原理已经超越了时代太多，以至于仍然可以说生不逢时？
我希望永杨安风能让 LBE 安全大师继续发展下去。因为毕竟不是所有安卓用户都会玩 xposed ，都会使用绿色守护、阻止运行、写轮眼、doze setting 之类的神器；这些神器就算有各种教程，其实门槛还是略高（比如我认识的很多 romer ，他们深谙 Android 开发和 ROM 移植和适配，可是他们依然不懂得如何用写轮眼）。而 LBE 用同样或相似的原理下成功降低了用户的使用门槛，实属难得。
